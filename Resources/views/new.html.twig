{% extends 'VictoireCoreBundle:Widget:new.html.twig' %}
{% trans_default_domain 'victoire' %}

{% block form %}
    {{ form_start(form) }}
    <div class="vic-row">
        {% include 'VictoireWidgetConnectBundle:part:form_login_form.html.twig' %}
        {% include 'VictoireWidgetConnectBundle:part:form_resource_owners.html.twig' %}
        {% include 'VictoireWidgetConnectBundle:part:form_general.html.twig' %}

        <div class="vic-col-sm-12">
            {{ form_rest(form) }}
        </div>
    </div>
    {{ form_end(form) }}

    <script>
        <!--
        $vic(document).ready(function(){
            $vic('.resource_owners input[type="checkbox"]').each(function(){
                var owner = $vic(this).val();
                $vic(this).on('change', function() {
                    if ($vic('.{{ constant('PREFIX_RESOURCE_OWNER_LABEL', form.vars.data) }}' + owner).hasClass('vic-hidden')) {
                        $vic('.{{ constant('PREFIX_RESOURCE_OWNER_LABEL', form.vars.data) }}' + owner).removeClass('vic-hidden');
                    } else {
                        $vic('.{{ constant('PREFIX_RESOURCE_OWNER_LABEL', form.vars.data) }}' + owner).addClass('vic-hidden');
                    }
                });
            });
        });
        -->
    </script>
{% endblock form %}
