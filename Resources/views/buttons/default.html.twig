{% block oauth_button %}
    <a href="{% block button_href %}{{ path("victoire_widget_connect_login_resource_owners", {id: widget.id, service: resource_owner}) }}{% endblock %}"
            class="{% block button_class %}btn btn-default btn-oauth{% endblock %}" {% block button_attr %}{% endblock %}
            id="widget-{{ id }}-{{ resource_owner }}">
        {% block button_label %}
            {{ attribute(resourceOwners, constant('PREFIX_RESOURCE_OWNER_LABEL', widget) ~ resource_owner) }}
        {% endblock button_label %}
    </a>
{% endblock oauth_button %}

{% block oauth_script %}
    <script>
        <!--
            $(document).ready(function(){
                $('#widget-{{ id }}-{{ resource_owner }}').on('click', function(e) {
                    var left, top, width = 400, height = 600;
                    e.preventDefault();
                    if(window.innerWidth) {
                        left = (window.innerWidth-width)/2;
                        top = (window.innerHeight-height)/2;
                    } else {
                        left = (document.body.clientWidth-width)/2;
                        top = (document.body.clientHeight-height)/2;
                    }
                    $.oauthpopup({
                        windowName: '{{ resource_owner }}',
                        windowOptions: 'location=0,status=0,width=' + width + ',height=' + height + ',left=' + left + ',top=' + top,
                        path: $('#widget-{{ id }}-{{ resource_owner }}').attr('href'),
                        callback: function() {
                            window.location.replace("{{ redirectUrl }}");
                        }
                    });
                });
            });
        -->
    </script>
{% endblock oauth_script %}
